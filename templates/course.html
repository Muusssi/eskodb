{% extends esko_template.html %}

{% block title_block %}tulokset {{ course }}{% end %}

{% block head %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src={{static_url("sorttable.js")}}></script>
  <script type="text/javascript">
    window.onload = function() {
      var table_head = document.getElementById('result_head');
      var row = table_head.insertRow(1);
      row.insertCell(0);
      row.insertCell(1).outerHTML = "<th>par</th>";
      row.insertCell(2).outerHTML = "<th>{{par_sum}}</th>";
      {% for par in reversed(pars) %}
        row.insertCell(2).outerHTML = "<th>{{par}}</th>";
      {% end %}

    }


  </script>
{% end %}

{% block body %}
  <h1>{{ course }}
    <a class="btn btn-info" href="/full/{{course_id}}/">Lisää koko pelin tulos</a>
    <a class="btn btn-info" href="/hole_statistics/{{course_id}}/1/">Histogrammi</a>
  </h1>

  <p id="loading_message"></p>
  <div id="table_div">
    <table id="foo_tabel" class="sortable table table-striped table-bordered table-condensed table-hover">
      <thead id="result_head">
        <tr>
          <th>Date</th>
          <th>Player</th>
          {% for hole in range(1, holes+1) %}
            <th>{{hole}}</th>
          {% end %}
          <th>Sum</th>
          <th>par</th>
        </tr>

      </thead>
      <tbody>

      {% for game, player, row, sum, sum_par in results %}
        <tr>
          <td>{{game}}</td>
          <td>{{player}}</td>
          {% for throws, penalty, dif in row %}
              <td class="par{{dif}}">{{str(throws)+ '*'*penalty}}</td>
          {% end %}
          <td>{{sum}}</td>
          <td>{{sum_par}}</td>
        </tr>
      {% end %}
      </tbody>
      <tfoot>

      </tfoot>
    </table>

  </div>
{% end %}